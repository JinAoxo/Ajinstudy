<!DOCTYPE html>
<html lang="ko">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>scroll event</title>
	<link rel="stylesheet" href="../../css/style.css">
</head>

<body>
	<h1 class="sr-only">#3. 스터디 주제 : scroll event</h1>

	<div class="wrap p-10">
		<h2>scroll event</h2>
		<p><strong>스터디 내용 : </strong>scroll event/ offset 좌표에 따른 변경</p>

		<section class="p-5">
			<h3>내용</h3>
			<ol>
				<li>1. scroll을 이용해서 버튼을 눌렀을때 해당 section(title 영역 포함) 해당 좌표로 이동</li>
				<li>2. 좌표에 의해 해당 스크롤 위치로 이동함에 따라 배경 색상 변경 반복+계속 offset 이용</li>
			</ol>
			<div class="btn-area">
				<button type="button" class="btn btn-bottom">맨 아래로🔻</button>
				<button type="button" class="btn btn-middle">중간 🔻</button>
			</div>
		</section>
		<section class="scroll-page p-5">
			<h3>section : 1page</h3>
		</section>
		<section class="scroll-page p-5">
			<h3>section : 2page</h3>
		</section>
		<section class="scroll-page p-5">
			<h3>section : 3page</h3>
		</section>
		<section class="scroll-page p-5">
			<h3>section : 4page</h3>
		</section>
	</div>

	<!-- JavaScript -->
	<script src="../../js/jquery-3.5.1.min.js"></script>

	<!-- TODO : 개발시 반드시 삭제, 레이아웃 세팅 JS -->
	<!-- <script src="../js/ui-layout-setting.js"></script> -->

	<!-- 공통 UI 컴포넌트 -->
	<script src="../../js/ui-main.js"></script>
	<script src="../../js/study.js"></script>

	<!-- 페이지 개별 스크립트 -->
	<script>
		// 이곳에 정의
		// 1. scroll() 함수 => 이벤트 핸들러를 "스크롤" JavaScript 이벤트에 바인딩하거나 요소에서 해당 이벤트를 트리거함
		//.scroll( 핸들러 ) : 이벤트가 발생할 때 마다 실행함 , .scroll([eventData], 핸들러), .scroll()
		// var x = window.scrollX;
		// var y = window.scrollY;
		// 2-1. scrollTop => 스크롤 막대가 맨 위에 있거나 요소를 스크롤할 수 없는 경우 이 숫자 => '0'
		// - let scroll = $(window).scrollTop();
		// 2-2. scrollHeight
		// 3. animate() 함수 => .animate( {properties}, [ duration:지속 시간 ], [ easing ], [ complete ] ) / .animate(속성, 옵션)

		//.offset() : 선택한 요소의 첫 번째 요소의 위치를 HTML 문서를 기준으로 반환하거나, 선택한 요소의 위치를 인수로 전달받은 값으로 설정.
		//.position() : 선택한 요소의 첫 번째 요소의 위치를 해당 요소가 웹 페이지에 위치할 때 기준이 되었던 부모 요소를 기준으로 하는 상대 위치를 반환.
		//.scrollLeft() : 선택한 요소의 첫 번째 요소의 수평 스크롤 바의 위치를 얻거나, 선택된 요소의 수평 스크롤 바의 위치를 인수로 전달받은 값으로 설정.
		//.scrollTop() : 선택한 요소의 첫 번째 요소의 수직 스크롤 바의 위치를 얻거나, 선택된 요소의 수직 스크롤 바의 위치를 인수로 전달받은 값으로 설정.

		// 💢 offset으로 하는 방법?????

		//1. 스크롤에 따른 background 변경
		//**. scrollTop()으로 해당 좌표 찾기 : 오류 scroll 이벤트가 발생하지 않으면 발동 안됨 =>  위치값이 아님 ? 
		$(function () {
			$(window).on('scroll', function () {
				var scrollpage = $(this).scrollTop();
				// var scrollpage = $().offset().top;
				console.log(scrollpage);
				if (scrollpage > 2056) {
					$('html').css('background', '#4DCF42');
				} else if (scrollpage > 1160) {
					$('html').css('background', '#2F8FED');
				} else if (scrollpage > 260) {
					$('html').css('background', '#4332CF');
				} else {
					$('html').css('background', '#7A4EAB');
				}
			});
		});


		// **. mousewhell 이벤트이기 때문에 해당 위치로 한번에 이동하면 적용 안됨
		// $(window).on('scroll', function () {
		// 	// var ht = $('window').height(); //window 보여지는 view 높이값
		// 	var ht = $('.scroll-page').offset().top + 646; //window 보여지는 view 높이값
		// 	var scroll = $(window).scrollTop(); //window의 스크롤 값
		// 	console.log(ht, scroll);

		// 	$('html').on('mousewheel', function () {
		// 		var bgchange = scroll / ht;
		// 		if (bgchange <= 1) {
		// 			$('html').css('background', '#7A4EAB');
		// 		} else if (bgchange <= 2) {
		// 			$('html').css('background', '#4332CF');
		// 		} else if (bgchange <= 3) {
		// 			$('html').css('background', '#2F8FED');
		// 		} else if (bgchange <= 4) {
		// 			$('html').css('background', '#4DCF42');
		// 		}
		// 	});
		// });


		//2. 중간 섹션으로 내려가는 이벤트
		$(function () {
			$('.btn-middle').click(function () {
				$('html,body').animate({
						scrollTop: $("section").eq(2).offset().top
						// scrollTop: $("section").eq(2).offset().top - 100 //title이 안나오거나 더 보고 싶다면 - 숫자 사용
					},
					'slow');
			});
		});

		//3. 맨 아래로 내려가는 이벤트
		$(function () {

			//1. 버튼 클릭시
			$('.btn-bottom').click(function () {
				//2. html 파일을 스크롤로 문서의 높이값 최하단으로 한번에 이동
				// $('html').scrollTop($(document).height());

				//3. html 애니메이션() / scrollTop의 높이값을 변경 (0.5초로)
				$('html').animate({
					scrollTop: $('html')[0].scrollHeight
				}, 500);
			});
		});
	</script>
</body>

</html>